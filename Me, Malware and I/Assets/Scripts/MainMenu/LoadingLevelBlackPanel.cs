using System.Collections;
using System.Collections.Generic;
using UnityEngine;
using UnityEngine.UI;
using DG.Tweening;
using System;

public class LoadingLevelBlackPanel : MonoBehaviour
{
    public static event Action FadeComplete;

    [SerializeField] private float waitForStartTime;
    [SerializeField] private float screenTime;
    [SerializeField] private float fadeTime;
    [SerializeField] private float waitAtTheEnd;
    private Image image;
    private void Awake()
    {
        image = gameObject.GetComponent<Image>();
    }
    private void Start()
    {
        Invoke("FadeIn", waitForStartTime);
    }

    private void FadeIn()
    {
        image.DOFade(0, fadeTime).SetEase(Ease.InSine).OnComplete(WaitForFadeOut);
    }

    private void WaitForFadeOut()
    {
        StartCoroutine(WaitAndFadeOut());
    }

    IEnumerator WaitAndFadeOut()
    {
        yield return new WaitForSeconds(screenTime);
        image.DOFade(1, fadeTime).SetEase(Ease.InSine).OnComplete(WaitForEnd);
    }

    private void WaitForEnd()
    {
        Invoke("FadeCompleteCall", waitAtTheEnd);
    }


    private void FadeCompleteCall()
    {
        FadeComplete?.Invoke();
    }
}
