using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class InputEnemy : MonoBehaviour
{
    [SerializeField] Transform targetPosition;
    ICharacterMove characterMove;
    private Vector3 positionStart;
    private Vector3 positionEnd;

    private void Awake()
    {
        characterMove = GetComponent<ICharacterMove>();
        positionStart = transform.position;
        positionEnd = targetPosition.position;
    }

    void Start()
    {
        SetTargetPositionAndMove(positionEnd);
        StartCoroutine(SetPosition());
    }

    private void SetTargetPositionAndMove(Vector3 position)
    {
        int w = (int)position.x;
        int h = (int)position.z;
        int x = Mathf.RoundToInt(transform.position.x);
        int z = Mathf.RoundToInt(transform.position.z);
        characterMove.Move(w, h, x, z);
    }

    IEnumerator SetPosition()
    {
        yield return new WaitForSeconds(14);
        SetTargetPositionAndMove(positionStart);
    }
}
