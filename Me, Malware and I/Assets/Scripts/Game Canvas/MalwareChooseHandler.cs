using System;
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class MalwareChooseHandler : MonoBehaviour
{
    [SerializeField] GameModeSO currentGameMode;
    [SerializeField] BoolVariableSO isFloorCalculationFinish;
    [SerializeField] CanvasGameStateHandler canvasGameStateHandler;

    private CharacterStateManager characterStateManager;

    private void Awake()
    {
        characterStateManager = FindObjectOfType<CharacterStateManager>();
    }

    private void Update()
    {
        GetKeyboardInput();
    }

    private void GetKeyboardInput()
    {
        if (Input.GetKeyDown(KeyCode.Alpha1)) SetMalware(1);
        if (Input.GetKeyDown(KeyCode.Alpha2)) SetMalware(2);
        if (Input.GetKeyDown(KeyCode.Alpha3)) SetMalware(3);
    }

    public void SetMalware(int num)
    {
        if (!isFloorCalculationFinish.GetValue || currentGameMode.GameMode != GameMode.VirusSelection) return;

        characterStateManager.SetMalwareState(num);
        canvasGameStateHandler.ButtonActive(num);
    }
}
